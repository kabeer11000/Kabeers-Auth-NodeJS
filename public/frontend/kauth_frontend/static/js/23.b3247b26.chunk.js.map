{"version":3,"sources":["functions/Login/Login.js","functions/Login/AddToAccounts.js","functions/StorageIndex.js","sdk/kauthsdk.js","components/EmbeddedAccountSystem/EmbeddedAccountSystem.js"],"names":["Login","_ref","Object","E_Projects_phpstormprojects_kauth_new_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","E_Projects_phpstormprojects_kauth_new_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee3","userdata","embedded","mainElement","AppData","ajax","getToken","_args3","arguments","wrap","_context3","prev","next","length","undefined","document","getElementById","authCode","getAttribute","clientPublic","abrupt","Error","_ref2","_callee","_args","_context","fetch","url","E_Projects_phpstormprojects_kauth_new_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","then","res","ok","json","stop","apply","this","_ref3","_callee2","t","_context2","endPoints","authToken","method","timeout","headers","Content-Type","body","getFormData","client_secret","getQueryParam","client_public","auth_code","e","authAllow","Accept","username","password","URLSearchParams","callback","split","state","get","nonce","window","location","href","token","JSON","stringify","concat","encodeURI","catch","_x","ChooserLoginTest","_ref4","_callee4","account","c","_args4","_context4","FingerprintJS","load","fp","details","chooserLoginTest","credentials","deviceId","visitorId","user_id","session_token","_x2","Devices","sendUpdateEmail","_sendUpdateEmail","_callee5","_context5","UserDevicesSendEmail","_x3","sendUpdateRequest","_sendUpdateRequest","_callee6","code","id","_context6","UserDevicesUpdate","sent","_x4","_x5","_x6","CreateAccount","GetClientInfo","i","info","AddToAccounts","accounts","localStorage","getItem","StorageIndex","setItem","parse","find","user","push","findIndex","E_Projects_phpstormprojects_kauth_new_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","removeItem","kauth","init","client_id","scope","redirect_uri","_ref$state","crypto","getRandomValues","Uint32Array","join","_ref$nonce","_this","prompt","container","console","warn","innerHTML","addEventListener","log","origin","data","msg","createElement","AccountChooser","props","_React$useContext","React","useContext","EmbededAccountContext","_React$useContext2","E_Projects_phpstormprojects_kauth_new_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","setState","Accounts","MainElement","_React$useContext3","AccountVerificationContext","_React$useContext4","_React$useState","useState","_React$useState2","react__WEBPACK_IMPORTED_MODULE_4___default","_material_ui_core_List__WEBPACK_IMPORTED_MODULE_6__","map","index","_material_ui_core_ListItem__WEBPACK_IMPORTED_MODULE_7__","style","minWidth","button","alignItems","onClick","E_Projects_phpstormprojects_kauth_new_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","backdrop","d","status","headersSlideIn","accountSelected","key","_material_ui_core_ListItemAvatar__WEBPACK_IMPORTED_MODULE_8__","_material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_9__","alt","src","account_image","_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_10__","primary","secondary","email","PermsComponent","_React$useContext5","_React$useContext6","_material_ui_core_Container__WEBPACK_IMPORTED_MODULE_21__","_material_ui_core__WEBPACK_IMPORTED_MODULE_17__","className","component","color","app","name","variant","perms","perm","Fragment","title","image","width","height","desc","_material_ui_core__WEBPACK_IMPORTED_MODULE_18__","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_20__","createContext","useStyles","makeStyles","theme","zIndex","drawer","root","EmbeddedAccountSystem","classes","_React$useState3","icon","atob","_React$useState4","_material_ui_core_Backdrop__WEBPACK_IMPORTED_MODULE_25__","open","_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_26__","Provider","value","_material_ui_core_Paper__WEBPACK_IMPORTED_MODULE_16__","position","bottom","paddingBottom","borderTopLeftRadius","borderTopRightRadius","overflow","maxHeight","elevation","_material_ui_icons__WEBPACK_IMPORTED_MODULE_23__","_material_ui_core_Slide__WEBPACK_IMPORTED_MODULE_19__","in","direction","overflowY","_material_ui_core_Grow__WEBPACK_IMPORTED_MODULE_22__","mountOnEnter","unmountOnExit","setHeader","defaultProps"],"mappings":"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","file":"static/js/23.b3247b26.chunk.js","sourcesContent":["import {getFormData, getQueryParam} from \"../Misc/Misc\";\r\nimport {endPoints} from \"../../api/endPoints\";\r\nimport FingerprintJS from \"@fingerprintjs/fingerprintjs\";\r\nimport React from \"react\";\r\n\r\nexport const Login = async (userdata, embedded = false) => {\r\n    const mainElement = document.getElementById('DataContainer');\r\n    const AppData = {\r\n        authCode: mainElement.getAttribute('authCode'),\r\n        clientPublic: mainElement.getAttribute('clientPublic'),\r\n    };\r\n    if (!mainElement) return new Error('Main Element Not Defined');\r\n    const ajax = async (a = {}) => fetch(a.url, {...a}).then(res => res.ok ? res.json() : null);\r\n    const getToken = async () => {\r\n        let t = void 0;\r\n        return await ajax({\r\n            url: endPoints.authToken,\r\n            method: \"POST\",\r\n            timeout: 0,\r\n            headers: {\"Content-Type\": \"application/x-www-form-urlencoded\"},\r\n            body: getFormData({\r\n                client_secret: getQueryParam('client_secret'),\r\n                client_public: AppData.clientPublic,\r\n                auth_code: AppData.authCode\r\n            })\r\n        }).then(function (e) {\r\n            t = e\r\n        }), t\r\n    };\r\n    return ajax({\r\n        url: endPoints.authAllow,\r\n        method: \"POST\",\r\n        timeout: 0,\r\n        headers: {\r\n            \"Accept\": \"application/json\",\r\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n        },\r\n        body: getFormData({\r\n            username: userdata.username,\r\n            password: userdata.password,\r\n            auth_code: AppData.authCode\r\n        })\r\n    })\r\n        .then((res) => {\r\n            if (!res) return;\r\n            if (getQueryParam('response_type') === \"code\") {\r\n                const e = new URLSearchParams(res.callback);\r\n                if (embedded) return ({\r\n                    callback: res.callback.split(/[?#]/)[0],\r\n                    state: e.get(\"state\"),\r\n                    nonce: e.get(\"nonce\"),\r\n                });\r\n                window.location.href = res.callback;\r\n            }\r\n            if (getQueryParam('response_type') === \"token\") {\r\n                const e = new URLSearchParams(res.callback);\r\n                return getToken().then(t => {\r\n                    if (!t) return;\r\n                    if (embedded) return ({\r\n                        callback: res.callback.split(/[?#]/)[0],\r\n                        token: JSON.stringify(t),\r\n                        state: e.get(\"state\"),\r\n                        nonce: e.get(\"nonce\"),\r\n                    });\r\n                    window.location.href = `${res.callback.split(/[?#]/)[0]}?token=${encodeURI(JSON.stringify(t))}&nonce=${e.get(\"nonce\")}&state=${e.get(\"state\")}`;\r\n                })\r\n            }\r\n        }).catch(e => {\r\n            return new Error('Error Response');\r\n        });\r\n};\r\nexport const ChooserLoginTest = async (account, c = false) => FingerprintJS.load().then(fp => fp.get().then(details => fetch(endPoints.chooserLoginTest(c), {\r\n    credentials: 'include',\r\n    method: 'POST',\r\n    headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/x-www-form-urlencoded'\r\n    },\r\n    timeout: 0,\r\n    body: getFormData({\r\n        deviceId: details.visitorId,\r\n        ...c ? {\r\n            user_id: account.user_id,\r\n            session_token: account.session_token\r\n        } : {\r\n            username: account.username,\r\n            password: account.password,\r\n        },\r\n    }),\r\n})));\r\n\r\nexport const Devices = {\r\n    sendUpdateEmail: async account => fetch(endPoints.UserDevicesSendEmail, {\r\n        method: \"POST\",\r\n        timeout: 0,\r\n        headers: {'Accept': 'application/json', \"Content-Type\": \"application/x-www-form-urlencoded\"},\r\n        body: getFormData({\r\n            username: account.username,\r\n            password: account.password,\r\n        })\r\n    }),\r\n    sendUpdateRequest: async (account, code, id) => await fetch(endPoints.UserDevicesUpdate, {\r\n        method: \"POST\",\r\n        timeout: 0,\r\n        headers: {'Accept': 'application/json', \"Content-Type\": \"application/x-www-form-urlencoded\"},\r\n        body: getFormData({\r\n            username: account.username,\r\n            password: account.password,\r\n            code: code,\r\n            deviceId: id\r\n        })\r\n    })\r\n};\r\nexport const CreateAccount = (account) => FingerprintJS.load().then(fp => fp.get().then(details => fetch(endPoints.GetClientInfo).then(i => i.json()).then(info => fetch(endPoints.CreateAccount, {\r\n        method: \"POST\",\r\n        timeout: 0,\r\n        headers: {'Accept': 'application/json', \"Content-Type\": \"application/x-www-form-urlencoded\"},\r\n        body: getFormData({...info, ...account, deviceId: details.visitorId})\r\n    })\r\n        .then(res => res.json())\r\n)))\r\n//\r\n// const sleep = m => new Promise(r => setTimeout(() => r(m[1]), m[0]));\r\n//\r\n// console.log(FingerprintJS.load().then(fp => fp.get().then(details => sleep([200, \"FUCK\"]))));\r\n","import {StorageIndex} from \"../StorageIndex\";\n\nexport const AddToAccounts = async (res) => {\n    if (!res) return new Error('No Account');\n    if (null === localStorage.getItem(StorageIndex.accounts)) return localStorage.setItem(StorageIndex.accounts, JSON.stringify([{\n        ...res,\n        password: undefined\n    }]));\n    else {\n        const accounts = JSON.parse(localStorage.getItem(StorageIndex.accounts));\n        if (!accounts.find(user => user.user_id === res.user_id)) return (accounts.push({\n            ...res,\n            password: undefined\n        }), localStorage.setItem(StorageIndex.accounts, JSON.stringify(accounts)))\n        else return (accounts[accounts.findIndex(user => user.user_id === res.user_id)] = {\n            ...res,\n            password: undefined\n        }, localStorage.setItem(StorageIndex.accounts, JSON.stringify(accounts)));\n    }\n};\nexport const getSavedAccounts = async () => localStorage.getItem(StorageIndex.accounts) === null ? new Error(\"No Accounts\") : JSON.parse(localStorage.getItem(StorageIndex.accounts));\n","export const StorageIndex = {\r\n    accounts: \"26f2aba545fda02c0f705960ff93fe70\",\r\n};\r\n(async () => localStorage.getItem(\"accounts\") === null ? null : localStorage.removeItem(\"accounts\"))();\r\n","window.kauth = () => {\r\n    const state = {\r\n        makeAuthURI: (p) => `/auth/authorize?client_id=${this.state.client_id}&scope=${this.state.client_id}&response_type=code&redirect_uri={encodeURIComponent(req.protocol + '://' + req.get('host') + '/app/callback')}&state={makeid(10)}&nonce={makeid(10)}&prompt={req.query.prompt || 'chooser'}`\r\n    };\r\n    return ({\r\n        init: ({\r\n                   client_id,\r\n                   scope,\r\n                   redirect_uri,\r\n                   state = window.crypto.getRandomValues(new Uint32Array(1)).join(),\r\n                   nonce = window.crypto.getRandomValues(new Uint32Array(1)).join()\r\n               }) => this.state = {client_id, redirect_uri, scope, state, nonce},\r\n        prompt: ({\r\n                     container\r\n                 }) => {\r\n            window.console.warn(\"Prompt Sign in Has Its Own Basic Info Scopes. Please Consider `redirect` or `render` for Custom Scopes\");\r\n            container.innerHTML = `<div><iframe src=\"\"`\r\n            window.addEventListener('message', e => {\r\n                console.log(e.origin); // outputs \"http://www.example.com/\"\r\n                console.log(e.data.msg); // outputs \"works!\"\r\n                if (e.origin === 'https://example1.com') {\r\n                    // do something\r\n                } else if (e.origin === 'https://example2.com') {\r\n                    // do something else\r\n                }\r\n            }, false);\r\n        },\r\n    })\r\n}\r\nwindow.kauth().init({\r\n    client_id: \"123456789\"\r\n});\r\nwindow.kauth().prompt({\r\n    container: document.createElement(\"div\")\r\n})\r\n","import React from 'react';\nimport './EmbeddedAccountSystem.css';\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport {MainElement} from \"../../functions/Misc/Misc\";\nimport {AccountVerificationContext} from \"../../contexts/Contexts\";\nimport {ChooserLoginTest, Devices, Login} from \"../../functions/Login/Login\";\nimport {AddToAccounts} from \"../../functions/Login/AddToAccounts\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport {Divider, Typography} from \"@material-ui/core\";\nimport Slide from \"@material-ui/core/Slide\";\nimport Button from \"@material-ui/core/Button\";\nimport Container from \"@material-ui/core/Container\";\nimport Grow from \"@material-ui/core/Grow\";\nimport {DragHandle} from \"@material-ui/icons\";\nimport \"../../sdk/kauthsdk\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nexport const AccountChooser = (props) => {\n    const [state, setState] = React.useContext(EmbededAccountContext);\n    const Accounts = localStorage.getItem('accounts') === null ? null : JSON.parse(localStorage.getItem('accounts'));\n    if (!MainElement) return new Error('Main Element Not Defined');\n    const [account, setAccount] = React.useContext(AccountVerificationContext);\n    const [open, setOpen] = React.useState(false);\n\n    const LoginHelper = (account) => {\n        setOpen(!open);\n        ChooserLoginTest(account).then(res => res.json())\n            .then(async value => {\n                if (value.status === 69) return (setAccount(account), await Devices.sendUpdateEmail(account), props.handleDeviceVerification(1));\n                if (value.status !== 200) return alert(\"unKnown Error Code\");\n                if (value !== 'Nothing Found') await AddToAccounts(value).then(() => {\n                    setAccount(account);\n                    props.callNext();\n                });\n            })\n            .catch(e => {\n                setOpen(false);\n            });\n    };\n    return (\n        <List>\n            {\n                Accounts.map((account, index) => (\n                    <ListItem style={{minWidth: '100%'}} button alignItems=\"flex-start\"\n                              onClick={() => {\n                                  setState({\n                                      ...state,\n                                      backdrop: true\n                                  });\n                                  ChooserLoginTest(account)\n                                      .then((d) => d.json().then(d => d.status === 200 && setState({\n                                          ...state,\n                                          headersSlideIn: !state.headersSlideIn,\n                                          accountSelected: true,\n                                          account: d,\n                                          backdrop: false\n                                      })))\n                                      .catch(e => setState({\n                                          ...state,\n                                          headersSlideIn: state.headersSlideIn,\n                                          accountSelected: false,\n                                          account: null\n                                      }))\n                                  //props.setHeader();\n                              }} key={index}>\n                        <ListItemAvatar>\n                            <Avatar alt={account.username} src={account.account_image}/>\n                        </ListItemAvatar>\n                        <ListItemText\n                            primary={account.username}\n                            secondary={account.email}\n                        />\n                    </ListItem>\n                ))\n            }\n        </List>\n    )\n}\nexport const PermsComponent = () => {\n    const [state, setState] = React.useContext(EmbededAccountContext);\n    return (\n        <Container>\n            <List>\n                <ListItem style={{minWidth: '100%'}} button alignItems=\"flex-start\"\n                          onClick={() => {\n                              setState({...state, headersSlideIn: !state.headersSlideIn, accountSelected: true})\n                              //props.setHeader();\n                          }}>\n                    <ListItemAvatar>\n                        <Avatar alt={state.account.username} src={state.account.account_image}/>\n                    </ListItemAvatar>\n                    <ListItemText\n                        primary={state.account.username}\n                        secondary={state.account.email}\n                    />\n                </ListItem>\n            </List>\n            <Typography className={'text-center'}>\n                <Typography component={\"span\"} className={\"mr-1\"} color={\"secondary\"}>\n                    {state.app.name}\n                </Typography>\n                wants Access to Your Account\n            </Typography>\n            <Typography variant={\"overline\"} component={'div'} className={\"text-left mt-3\"}>\n                This allows\n                <Typography className={\"ml-1\"} variant={\"overline\"} color={\"secondary\"}>\n                    {state.app.name}\n                </Typography> To:\n            </Typography>\n            <List className={`mt-3`}>\n                {\n                    state.app.perms.map((perm, index) => (\n                        <React.Fragment key={index}>\n                            <ListItem style={{minWidth: '100%'}} button alignItems=\"flex-start\">\n                                <ListItemAvatar>\n                                    <Avatar alt={perm.title} src={perm.image}\n                                            style={{width: '2rem', height: '2rem'}}\n                                            className={'bg-light'} variant={\"rounded\"}/>\n                                </ListItemAvatar>\n                                <ListItemText\n                                    primary={`${perm.desc}`}\n                                    secondary={perm.title}\n                                />\n                            </ListItem>\n                            <Divider variant=\"inset\" component=\"li\"/>\n                        </React.Fragment>\n                    ))\n                }\n            </List>\n            <Divider variant={\"middle\"}/>\n            <Button variant={\"contained\"} className={\"w-100 mt-2\"} onClick={() => {\n                setState({...state, backdrop: !state.backdrop});\n                Login(state.account, true)\n                    .then((res) => console.warn(res))\n                    .catch(e => setState({...state, backdrop: !state.backdrop}));\n            }}>\n                Allow App\n            </Button>\n        </Container>\n    )\n};\nexport const EmbededAccountContext = React.createContext({\n    headersSlideIn: true,\n    accountSelected: false\n});\nconst useStyles = makeStyles((theme) => ({\n    backdrop: {\n        zIndex: theme.zIndex.drawer + 1,\n        color: '#fff',\n    },\n    root: {\n        width: '100%',\n    },\n}));\nconst EmbeddedAccountSystem = () => {\n    const classes = useStyles();\n    const [state, setState] = React.useState({\n        headersSlideIn: true,\n        accountSelected: false,\n        backdrop: false,\n        app: {\n            name: MainElement.getAttribute('appName'),\n            icon: MainElement.getAttribute('appIcon'),\n            perms: JSON.parse(atob(MainElement.getAttribute('appPerms'))),\n        }\n    });\n    return (\n        <div className={classes.root}>\n            <Backdrop open={state.backdrop} className={classes.backdrop}>\n                <CircularProgress color=\"inherit\"/>\n            </Backdrop>\n            <EmbededAccountContext.Provider value={[state, setState]}>\n                <Paper className=\"EmbeddedAccountSystem w-100 h-100\" style={{\n                    position: \"fixed\",\n                    bottom: 0,\n                    paddingBottom: \"2.5rem\",\n                    borderTopLeftRadius: \"1rem\",\n                    borderTopRightRadius: \"1rem\",\n                    overflow: \"hidden\",\n//                overflowY: \"scroll\",\n                    maxHeight: \"60vh\",\n                    height: \"100%\",\n                }} elevation={5}>\n                    <div className={\"d-flex justify-content-center w-100\"}>\n                        <DragHandle/>\n                    </div>\n                    <Slide in={state.headersSlideIn} direction={\"bottom\"} style={{\n                        position: !state.headersSlideIn ? \"absolute\" : \"relative\"\n                    }}>\n                        <div>\n                            <List>\n                                <ListItem>\n                                    <ListItemAvatar>\n                                        <Avatar src={\"/kslogo.png\"} variant={\"rounded\"}/>\n                                    </ListItemAvatar>\n                                    <ListItemText primary={\"Sign in with Kabeers Network\"}\n                                                  secondary={\"Sign in to Medium.com with your Kabeers Network Account\"}/>\n                                </ListItem>\n                            </List>\n                            <Divider variant={\"fullwidth\"}/>\n                        </div>\n                    </Slide>\n                    <div className={\"h-100 w-100\"} style={{\n                        overflowY: \"scroll\",\n//                    maxHeight: \"30vh\",\n                    }}>\n                        <Grow direction={\"left\"} in={!state.accountSelected} style={{\n                            position: state.accountSelected ? \"absolute\" : \"relative\",\n                            overflowY: \"scroll\",\n                        }} mountOnEnter unmountOnExit>\n                            <div>\n                                <AccountChooser\n                                    setHeader={() => setState({...state, headersSlideIn: !state.headersSlideIn})}\n                                />\n                            </div>\n                        </Grow>\n                        <Grow mountOnEnter unmountOnExit in={state.accountSelected} style={{\n                            position: state.accountSelected ? \"absolute\" : \"relative\"\n                        }}>\n                            <div>\n                                <PermsComponent/>\n                            </div>\n                        </Grow>\n                    </div>\n                </Paper>\n            </EmbededAccountContext.Provider>\n        </div>\n    );\n}\n\nEmbeddedAccountSystem.propTypes = {};\n\nEmbeddedAccountSystem.defaultProps = {};\n\nexport default EmbeddedAccountSystem;\n"],"sourceRoot":""}