{"version":3,"sources":["components/PermessionsScreen/PermessionsScreen.js"],"names":["useStyles","makeStyles","theme","root","width","maxWidth","minWidth","backgroundColor","palette","background","paper","avatar","margin","spacing","secondary","main","inline","display","marginTop","flexDirection","alignItems","alignCenter","backdrop","zIndex","drawer","color","PermessionsScreen","props","classes","abortController","AbortController","MainElement","Error","AppData","appName","getAttribute","appIcon","appPerms","JSON","parse","atob","_React$useState","React","useState","_React$useState2","Object","E_Projects_phpstormprojects_kauth_new_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","open","setOpen","_React$useContext","useContext","AccountVerificationContext","_React$useContext2","account","useEffect","document","title","concat","abort","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","className","_material_ui_core_Container__WEBPACK_IMPORTED_MODULE_4__","component","_material_ui_core_Backdrop__WEBPACK_IMPORTED_MODULE_18__","_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_19__","_material_ui_core_Slide__WEBPACK_IMPORTED_MODULE_22__","in","direction","_material_ui_core_Card__WEBPACK_IMPORTED_MODULE_5__","_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_6__","_material_ui_core_Avatar__WEBPACK_IMPORTED_MODULE_7__","src","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_8__","variant","style","height","marginRight","alt","username","account_image","email","_material_ui_core_List__WEBPACK_IMPORTED_MODULE_10__","map","perm","index","Fragment","key","_material_ui_core_ListItem__WEBPACK_IMPORTED_MODULE_11__","button","_material_ui_core_ListItemAvatar__WEBPACK_IMPORTED_MODULE_12__","image","_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_13__","primary","desc","_material_ui_core_Divider__WEBPACK_IMPORTED_MODULE_14__","_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_16__","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_15__","onClick","window","location","href","decodeURIComponent","getQueryParam","Login","catch","e","defaultProps","pure"],"mappings":"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","file":"static/js/28.4d33cc54.chunk.js","sourcesContent":["import React, {useEffect} from 'react';\nimport './PermessionsScreen.css';\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport Container from \"@material-ui/core/Container\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {pure} from \"recompose\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport {Login} from \"../../functions/Login/Login\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport {getQueryParam, MainElement} from \"../../functions/Misc/Misc\";\nimport {AccountVerificationContext} from \"../../contexts/Contexts\";\nimport Slide from \"@material-ui/core/Slide\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        maxWidth: '50ch',\n        minWidth: '100%',\n        backgroundColor: theme.palette.background.paper,\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    inline: {\n        display: 'inline',\n    },\n    main: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    alignCenter: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        minWidth: '100%',\n        width: '100%'\n    },\n    backdrop: {\n        zIndex: theme.zIndex.drawer + 1,\n        color: '#fff',\n    },\n}));\nconst PermessionsScreen = (props) => {\n    const classes = useStyles();\n    const abortController = new AbortController();\n    if (!MainElement) return new Error('Main Element Not Defined');\n    const AppData = {\n        appName: MainElement.getAttribute('appName'),\n        appIcon: MainElement.getAttribute('appIcon'),\n        appPerms: JSON.parse(atob(MainElement.getAttribute('appPerms'))),\n    };\n    const [open, setOpen] = React.useState(false);\n    const [account, setAccount] = React.useContext(AccountVerificationContext);\n\n    const LoginHelper = () => {\n        setOpen(!open);\n        Login(account)\n            .catch(e => setOpen(false));\n    };\n    useEffect(() => {\n        document.title = `Allow ${MainElement.getAttribute('appName')} to access your data`;\n        return () => abortController.abort()\n    }, []);\n\n    return (\n        <div className=\"PermessionsScreen\">\n            <Container component=\"main\" maxWidth=\"xs\" className={'mt-5 pt-2 pb-2'}>\n                <Backdrop className={classes.backdrop} open={open}>\n                    <CircularProgress color=\"inherit\"/>\n                </Backdrop>\n                <Slide in={true} direction={\"left\"}>\n                    <Card className={classes.main}>\n                        <CardContent className={classes.alignCenter}>\n                            <Avatar src={AppData.appIcon} className={classes.avatar}/>\n                            <Typography className={'text-center'}>\n                                <Typography component={\"span\"} className={\"mr-1\"} color={\"secondary\"}>\n                                    {AppData.appName}\n                                </Typography>\n                                wants Access to Your Account\n                                <br/>\n                                <Typography variant={\"caption\"} className={'d-inline-flex'}>\n                                    <Avatar style={{width: '1rem', height: '1rem', marginRight: '0.5rem'}}\n                                            alt={account.username}\n                                            src={account.account_image}/>\n                                    {account.email}\n                                </Typography>\n                            </Typography>\n                            <Typography variant={\"overline\"} component={'div'} className={\"text-left mt-3\"}>\n                                This allows\n                                <Typography className={\"ml-1\"} variant={\"overline\"} color={\"secondary\"}>\n                                    {AppData.appName}\n                                </Typography> To:\n                            </Typography>\n                            <List className={`${classes.root} mt-3`}>\n                                {\n                                    AppData.appPerms.map((perm, index) => (\n                                        <React.Fragment key={index}>\n                                            <ListItem style={{minWidth: '100%'}} button alignItems=\"flex-start\">\n                                                <ListItemAvatar>\n                                                    <Avatar alt={perm.title} src={perm.image}\n                                                            style={{width: '2rem', height: '2rem'}}\n                                                            className={'bg-light'} variant={\"rounded\"}/>\n                                                </ListItemAvatar>\n                                                <ListItemText\n                                                    primary={`${perm.desc}`}\n                                                    secondary={perm.title}\n                                                />\n                                            </ListItem>\n                                            <Divider variant=\"inset\" component=\"li\"/>\n                                        </React.Fragment>\n                                    ))\n                                }\n                            </List>\n                            <div className={\"TrustComponent mt-3 px-2\"}>\n                                <Typography variant={\"button\"}>\n                                    Make sure you trust {AppData.appName}\n                                </Typography>\n                                <Typography variant={\"body2\"}>\n                                    You may be sharing sensitive info with this site or app. Learn about\n                                    how {AppData.appName} will handle your data by reviewing its terms of service\n                                    and\n                                    privacy policies. You can always see or remove access in your Kabeers Network\n                                    Account.\n                                </Typography>\n                            </div>\n                        </CardContent>\n                        <CardActions className={'mb-5'}>\n                            <Button\n                                onClick={() => window.location.href = `${decodeURIComponent(getQueryParam(\"redirect_uri\"))}?error=access_denied`}\n                                color=\"secondary\"\n                                className={'mx-2'}>\n                                Cancel\n                            </Button>\n                            <Button\n                                variant=\"contained\"\n                                color=\"primary\"\n                                className={'mx-2'}\n                                onClick={LoginHelper}>\n                                Allow\n                            </Button>\n                        </CardActions>\n                    </Card>\n                </Slide>\n            </Container>\n        </div>\n    );\n};\n\nPermessionsScreen.propTypes = {};\n\nPermessionsScreen.defaultProps = {};\n\nexport default pure(PermessionsScreen);\n"],"sourceRoot":""}