<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="/stylesheets/bootstrap_matrial_design.css" rel="stylesheet" id="bootstrap-css">
<!------ Include the above in your HEAD tag ---------->
<style>
    @media screen and (max-width: 600px) {
        .card {
            box-shadow: none !important;
            border: none !important;
            background-color: #fafafa
        }

        body {
            background-color: #fafafa
        }
    }
</style>
<script async defer src="http://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script async defer src="https://unpkg.com/bootstrap-material-design@4.1.1/dist/js/bootstrap-material-design.js"
        integrity="sha384-CauSuKpEqAFajSpkdjv3z9t8E7RlpJ1UP0lKM/+NdtSarroVKu069AlsRPKkFBz9"
        crossorigin="anonymous"></script>
<div class="container">

    <div class="row d-flex justify-content-center mt-5">
        <aside class="col-md-6">

            <div class="my-5 text-center h5"><img
                    src="data:image/png;base64,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"
                    class="rounded-circle mr-3" style="width:2rem;height:auto"/>Kabeers Network
            </div>

            <div class="card">
                <article class="card-body">
                    <h4 class="card-title text-capitalize text-center mb-4 mt-1">Continue to {{app_name}}</h4>
                    <hr>
                    <div class="my-5 text-center mdc-typography--headline5"><img src="{{profile_img}}"
                                                                                 class="rounded-circle mr-3"
                                                                                 style="width:2rem;height:auto"/>Continue
                        as {{username_}}
                    </div>
                    <div class="my-5 mdc-list">
                        <div class="my-2 mb-5">
                            {{desc}}</div>
                        <div id="accordion">
                            {{{grant_types_ui}}}
                        </div>
                    </div>
                    <script>
                        async function login() {
                            const accounts = async (res) => {
                                if (null === localStorage.getItem("accounts")) {
                                    const a = [{
                                        username: res.user_data.username,
                                        email: res.user_data.email,
                                        password: btoa(res.user_data.password),
                                        account_image: res.user_data.account_image
                                    }];
                                    localStorage.setItem("accounts", JSON.stringify(a))
                                } else {
                                    var data = JSON.parse(localStorage.getItem("accounts")), currentData = {
                                        username: res.user_data.username,
                                        email: res.user_data.email,
                                        password: btoa(res.user_data.password),
                                        account_image: res.user_data.account_image
                                    };
                                    JSON.stringify(data).includes(JSON.stringify(currentData)) || (data.push({
                                        username: res.user_data.username,
                                        email: res.user_data.email,
                                        password: btoa(res.user_data.password),
                                        account_image: res.user_data.account_image
                                    }), localStorage.setItem("accounts", JSON.stringify(data)))
                                }
                            };
                            const ajax = async (a = {}) => {
                                return (await fetch(a.url, {...a})).json()
                            };
                            const getFormData = n => {
                                let e = [];
                                for (let o in n) n.hasOwnProperty(o) && e.push(encodeURIComponent(o) + "=" + encodeURIComponent(n[o]));
                                return e.join("&")
                            };
                            const getToken = async () => {
                                let t = void 0;
                                return await ajax({
                                    url: "/auth/token",
                                    method: "POST",
                                    timeout: 0,
                                    headers: {"Content-Type": "application/x-www-form-urlencoded"},
                                    body: getFormData({
                                        client_secret: "{{client_secret}}",
                                        client_public: "{{client_public}}",
                                        auth_code: "{{code}}"
                                    })
                                }).then(function (e) {
                                    t = e
                                }), t
                            };
                            const settings = {
                                url: "/auth/allow",
                                method: "POST",
                                timeout: 0,
                                headers: {"Content-Type": "application/x-www-form-urlencoded"},
                                body: getFormData({
                                    username: document.querySelector('.username').value,
                                    password: document.querySelector('.password').value,
                                    auth_code: "{{code}}"
                                })
                            };
                            ajax(settings).then((res) => {
                                if (res) {
                                    accounts(res);
                                    "code" === '{{response_type}}' && (window.location.href = res.callback);
                                    if ("token" === '{{response_type}}') {
                                        const e = new URLSearchParams(res.callback);
                                        getToken().then(t => {
                                            t && (window.location.href = `${res.callback.split(/[?#]/)[0]}?token=${encodeURI(JSON.stringify(t))}&nonce=${e.get("nonce")}&state=${e.get("state")}`)
                                        })
                                    }
                                }
                            });
                        }

                        const uQSP = (e, r, a) => {
                            let n = new RegExp("([?&])" + r + "=.*?(&|#|$)", "i");
                            if (void 0 === a) return e.match(n) ? e.replace(n, "$1$2") : e;
                            if (e.match(n)) return e.replace(n, "$1" + r + "=" + a + "$2");
                            var t = "";
                            -1 !== e.indexOf("#") && (t = e.replace(/.*#/, "#"), e = e.replace(/#.*/, ""));
                            var i = -1 !== e.indexOf("?") ? "&" : "?";
                            return e + i + r + "=" + a + t
                        }
                    </script>
                    <div>

                        <input name="authCode" value="{{code}}" type="hidden">
                        <input name="state" value="{{state}}" type="hidden">
                        <input name="callback" value="{{callback}}" type="hidden">
                        <div class="form-group d-none">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"> <i class="fa fa-user"></i> </span>
                                </div>
                                <input name="username" autofocus class="form-control username" placeholder="Username"
                                       value="{{username_}}" type="hidden">
                            </div> <!-- input-group.// -->
                        </div> <!-- form-group// -->
                        <div class="form-group d-none">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                                </div>
                                <input class="form-control password" name="password" placeholder="******"
                                       value={{password_}} type="hidden">
                            </div> <!-- input-group.// -->
                        </div> <!-- form-group// -->
                        <div class="form-group">
                            <button type="submit" onclick="login()"
                                    class="btn btn-raised btn-primary btn-block"> {{btn}}</button>
                            <a onclick='window.location.href=uQSP(window.location.href, "prompt", "chooser");'
                               class="w-100 btn btn-block">Choose another
                                Account</a>
                        </div> <!-- form-group// -->
                    </div>
                </article>
            </div> <!-- card.// -->

        </aside> <!-- col.// -->
    </div> <!-- row.// -->

</div>
<!--container end.//-->

